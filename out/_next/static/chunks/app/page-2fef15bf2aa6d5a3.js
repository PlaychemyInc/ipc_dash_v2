(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{29704:(t,e,i)=>{Promise.resolve().then(i.t.bind(i,33063,23)),Promise.resolve().then(i.bind(i,65577)),Promise.resolve().then(i.t.bind(i,68334,23))},65577:(t,e,i)=>{"use strict";i.d(e,{default:()=>P});var s=i(95155),a=i(12115),r=i(31298),n=i(24820);class h{async load(){this.assets=await this.game.assets.loadBundle(this.key)}onLoadComplete(){}add(t){this.scene.addChild(t)}setScene(t){this.game.sceneManager.setScene(t)}getScreenWidth(){return this.game.app.screen.width}getScreenHeight(){return this.game.app.screen.height}updateScreenSize(){}constructor(t,e){this.game=t,this.key=e,this.scene=new r.Container,this.game.app.stage.addChild(this.scene),this.load().then(this.onLoadComplete.bind(this))}}class o extends h{onLoadComplete(){this.addText()}addText(){let t=new r.Text({text:"IPC Dash - Click to Start",style:{fill:0xffffff,fontSize:32}});t.anchor.set(.5),t.x=this.game.app.screen.width/2,t.y=this.game.app.screen.height/2,t.eventMode="static",t.cursor="pointer",t.on("pointerdown",()=>this.setScene("game")),this.add(t)}constructor(t){super(t,"init-scene")}}class d extends r.Container{constructor(t,e=150,i=50,s=()=>{}){super(),this.interactive=!0,this.cursor="pointer",this.bg=new r.Graphics().beginFill(3368703).drawRoundedRect(0,0,e,i,10).endFill(),this.addChild(this.bg),this.label=new r.Text(t,{fill:0xffffff,fontSize:18}),this.label.anchor.set(.5),this.label.x=e/2,this.label.y=i/2,this.addChild(this.label),this.on("pointertap",s),this.on("pointerover",()=>{this.bg.tint=5609983}),this.on("pointerout",()=>{this.bg.tint=0xffffff})}}var p=i(31654);class c extends r.Container{getValue(){return this.input.value}setValue(t){this.input.text=t}focus(){this.input.focus()}blur(){this.input.blur()}constructor({label:t="Label",placeholder:e="Enter text",x:i=0,y:s=0}){super(),this.x=i,this.y=s;let a=new r.Text(t,{fontSize:16,fill:0xffffff,fontWeight:"bold"});a.y=0,this.addChild(a),this.input=new p.p({bg:r.Sprite.from("input"),placeholder:e,padding:{top:10,bottom:10,left:10,right:10},textStyle:{fill:"#000000",fontSize:16},width:200}),this.input.y=a.height+8,this.addChild(this.input)}}class l extends r.Container{constructor(t,e,i=()=>{}){super();let s=new r.Graphics().beginFill(0xffffff).drawRoundedRect(0,0,300,200,20).endFill();s.x=(t.screen.width-300)/2,s.y=(t.screen.height-300)/2,this.addChild(s);let a=new r.Text(e,{fill:0,fontSize:18,wordWrap:!0,wordWrapWidth:260});a.x=s.x+20,a.y=s.y+40,this.addChild(a),this.input=new c({label:"",placeholder:"IPC ID",x:s.x,y:s.y+40}),this.addChild(this.input);let n=new d("Add",100,40,()=>{i(this.input.getValue())});n.x=s.x+100,n.y=s.y+130,this.addChild(n)}}class u{startFollowIPC(t,e,i){var s=0;let a=n=>{t.x+t.sprite.width>=e&&console.log(s=t.getSpeed()/10),this.camera.pivot.x+e<i?(this.camera.pivot.x+=s,this.camera.pivot.x+e>i&&(this.camera.pivot.x=i-e)):r.Ticker.shared.remove(a)};r.Ticker.shared.add(a)}constructor(t){this.camera=t.scene,this.scene=t}}var g=i(33477),S=i(94971),m=i(95920),f=i(86266),w=new WeakMap,y=new WeakMap;class x{async getIPCdata(){let t="https://api.opensea.io/api/v2/metadata/ethereum/".concat("0x011C77fa577c500dEeDaD364b8af9e8540b808C0","/").concat((0,S._)(this,w)),e=await fetch(t),i=await e.json();this.description=i.description,this.loadSprite(),this.setIPCprops(i.traits)}async loadSprite(){let t=new r.AnimatedSprite(this.spritesheet.animations.ipc);t.anchor.set(.5),t.scale.set(.5),t.animationSpeed=.5,t.x=this.x,t.y=this.y,t.play(),this.sprite=t,this.callback(t)}setIPCprops(t){t.forEach(t=>{(0,S._)(this,y)[t.trait_type]=t.value})}startRace(){let t=this.getSpeed()/10,e=this;this.sprite;let i=s=>{e.sprite.x<3904?(e.sprite.x+=t,e.x+=t,e.sprite.x>3904&&(e.sprite.x=3904,e.x=3904)):r.Ticker.shared.remove(i)};r.Ticker.shared.add(i)}getID(){return(0,S._)(this,w)}getStrength(){return(0,S._)(this,y).Strength}getForce(){return(0,S._)(this,y).Force}getSustain(){return(0,S._)(this,y).Sustain}getTolerance(){return(0,S._)(this,y).Tolerance}getDexterity(){return(0,S._)(this,y).Dexterity}getSpeed(){return(0,S._)(this,y).Speed}getPrecision(){return(0,S._)(this,y).Precision}getReaction(){return(0,S._)(this,y).Reaction}getIntelligence(){return(0,S._)(this,y).Intelligence}getMemory(){return(0,S._)(this,y).Memory}getProcessing(){return(0,S._)(this,y).Processing}getReasoning(){return(0,S._)(this,y).Reasoning}getConstittuion(){return(0,S._)(this,y).Constittuion}getHealing(){return(0,S._)(this,y).Healing}getFortitude(){return(0,S._)(this,y).Fortitude}getVitality(){return(0,S._)(this,y).Vitality}getLuck(){return(0,S._)(this,y).Luck}getRace(){return(0,S._)(this,y).Race}getSubrace(){return(0,S._)(this,y).Subrace}getGender(){return(0,S._)(this,y).Gender}getSkinColor(){return(0,S._)(this,y).SkinColor}getHairColor(){return(0,S._)(this,y).HairColor}getEyeColor(){return(0,S._)(this,y).EyeColor}getHandedness(){return(0,S._)(this,y).Handedness}constructor(t,e,i,s,a){return(0,m._)(this,w,{writable:!0,value:void 0}),(0,m._)(this,y,{writable:!0,value:void 0}),this.spritesheet=t,(0,f._)(this,w,e),(0,f._)(this,y,{}),this.callback=a,this.x=i,this.y=s,this.getIPCdata(),this}}class C{async loadIpcSpriteJson(){let t=await fetch("assets/IpcSpriteSheet.json");this.ipcSheetData=await t.json()}async loadPortalAssets(){let t=await r.Assets.load("assets/PortalSpriteSheet.json");this.portal=new r.AnimatedSprite(t.animations.portal),this.portal.visible=!1,this.portal.anchor.set(.5),this.portal.scale.set(.5),this.scene.add(this.portal)}async addIPC(t,e){this.callback=e,this.startPortal(),this.imageURL="assets/IPCSpriteSheets/"+t+".png",this.ipcSheetData.meta.image=this.imageURL,await r.Assets.load(this.imageURL);let i=new r.Spritesheet(r.Texture.from(this.imageURL),this.ipcSheetData);await i.parse();var s=new x(i,t,this.ipcStart.x,this.ipcStart.y,this.onSpriteLoaded.bind(this));this.ipcArray.push(s),this.ipcStart.y+=130}startPortal(){this.portal.x=this.ipcStart.x,this.portal.y=this.ipcStart.y,this.portal.visible=!0,this.portal.play()}stopPortal(){this.portal.visible=!1,this.portal.stop()}onSpriteLoaded(t){this.stopPortal(),this.scene.add(t)}getMaxHieght(){return this.ipcStart.y+130}getNextIpcPos(){return this.ipcStart}startRace(){for(let t in this.ipcArray)this.ipcArray[t].startRace()}getFastestIPC(){var t;let e=-1/0;for(let i of this.ipcArray)e<i.x&&(e=i.x,t=i);return t}constructor(t,e){this.ipcArray=[],this.ipcStart=e,this.scene=t,this.loadPortalAssets(),this.loadIpcSpriteJson()}}class _ extends h{onLoadComplete(){this.uiLayer=new r.Container,this.uiLayer.visible=!1,this.game.app.stage.addChild(this.uiLayer),this.addbackground(),this.ipcManager=new C(this,{x:100,y:600}),this.camera=new u(this),this.popup=new l(this.game.app,"Add your IPC",this.addIPCtoScene.bind(this)),this.add(this.popup),this.popup.zIndex=1e3,this.addUIbutton()}ipcLoaded(t){}async addIPCtoScene(t){this.popup.visible=!1,this.uiLayer.visible=!0,this.ipcManager.addIPC(t,this.ipcLoaded.bind(this)),this.ensureFitsScreen(this.ipcManager.getMaxHieght())}updateScreenSize(){}addBgImage(t){let e=r.Sprite.from(this.assets[t]);return e.anchor.set(0,0),e.x=0,e.y=0,this.add(e),e}addbackground(){this.sky=this.addBgImage("sky"),this.mountains=this.addBgImage("mountains"),this.trees=this.addBgImage("trees"),this.grass=this.addBgImage("grass"),this.water=this.addBgImage("water"),this.topItems=this.addBgImage("topItems")}addText(){let t=new r.Text({text:"Game Scene - Click to go back",style:{fill:0xffffff,fontSize:32}});t.anchor.set(.5),t.x=this.getScreenWidth()/2,t.y=this.getScreenHeight()/2,t.eventMode="static",t.cursor="pointer",t.on("pointerdown",()=>this.setScene("init")),this.add(t)}addUIbutton(){this.addIPCButton=new g.w({defaultView:r.Sprite.from(this.assets.button),hoverView:r.Sprite.from(this.assets.button_hover),pressedView:r.Sprite.from(this.assets.button_pressed),text:"Add IPC",animations:{hover:{props:{scale:{x:1.02,y:1.02}},duration:100},pressed:{props:{scale:{x:1,y:1}},duration:100}}}),this.addIPCButton.x=10,this.addIPCButton.y=10,this.addIPCButton.onPress.connect(this.showPopup.bind(this)),this.uiLayer.addChild(this.addIPCButton),this.startRaceButton=new g.w({defaultView:r.Sprite.from(this.assets.button),hoverView:r.Sprite.from(this.assets.button_hover),pressedView:r.Sprite.from(this.assets.button_pressed),text:"Start Race",animations:{hover:{props:{scale:{x:1.02,y:1.02}},duration:100},pressed:{props:{scale:{x:1,y:1}},duration:100}}}),this.startRaceButton.x=this.getScreenWidth()-this.startRaceButton.width-10,this.startRaceButton.y=10,this.startRaceButton.onPress.connect(this.startRace.bind(this)),this.uiLayer.addChild(this.startRaceButton)}startRace(){this.ipcManager.startRace(),this.camera.startFollowIPC(this.ipcManager.getFastestIPC(),this.getScreenWidth(),4096)}showPopup(){this.popup.visible=!0,this.uiLayer.visible=!1}ensureFitsScreen(t){if(t>this.getScreenHeight()){let e=this.getScreenHeight()/t;this.scene.scale.set(e),this.scene.position.set(0,0)}}constructor(t){super(t,"game-scene")}}class b extends r.Container{fadeIn(){return new Promise(t=>{this.overlay.alpha=1,this.app.stage.addChild(this);let e=0,i=s=>{e+=this.app.ticker.elapsedMS,this.overlay.alpha=1-Math.min(e/this.duration,1),e>=this.duration&&(this.app.ticker.remove(i),this.app.stage.removeChild(this),t())};this.app.ticker.add(i)})}fadeOut(){return new Promise(t=>{this.overlay.alpha=0,this.app.stage.addChild(this);let e=0,i=s=>{e+=this.app.ticker.elapsedMS,this.overlay.alpha=Math.min(e/this.duration,1),e>=this.duration&&(this.app.ticker.remove(i),t())};this.app.ticker.add(i)})}constructor(t,e={}){super(),this.app=t,this.duration=e.duration||500,this.overlay=new r.Graphics,this.overlay.beginFill(0).drawRect(0,0,t.screen.width,t.screen.height).endFill(),this.overlay.alpha=0,this.addChild(this.overlay)}}class v{async setScene(t){switch(await this.transition.fadeOut(),this.currentScene&&this.app.stage.removeChildren(0),t){case"init":this.currentScene=new o(this.game);break;case"game":this.currentScene=new _(this.game)}return await this.transition.fadeIn(),this.currentScene}updateScreenSize(){this.currentScene.updateScreenSize()}constructor(t){this.game=t,this.app=t.app,this.currentScene=null,this.transition=new b(this.app,{duration:500})}}class I extends a.Component{render(){return(0,s.jsx)("div",{ref:this.pixiContainer})}async componentDidMount(){window.addEventListener("resize",this.handleResize);var t=await this.createApp();this.app=t,(0,n.v)({app:t}),this.pixiContainer.current.appendChild(this.app.canvas),await r.Assets.init({manifest:"/manifest.json"}),this.assets=r.Assets,this.sceneManager=new v(this),await this.sceneManager.setScene("init")}async createApp(){let t=new r.Application;return await t.init({resizeTo:window}),t}constructor(){super(),this.handleResize=()=>{this.sceneManager.updateScreenSize()},this.pixiContainer=(0,a.createRef)(),this.app=null,this.assets=null}}function P(){return(0,s.jsx)("div",{children:(0,s.jsx)(I,{})})}},68334:t=>{t.exports={page:"page_page__ZU32B",main:"page_main__GlU4n",ctas:"page_ctas__g5wGe",primary:"page_primary__V8M9Y",secondary:"page_secondary__lm_PT",footer:"page_footer__sHKi3",logo:"page_logo__7fc9l"}}},t=>{var e=e=>t(t.s=e);t.O(0,[397,285,441,684,358],()=>e(29704)),_N_E=t.O()}]);